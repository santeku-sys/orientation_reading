# PIE

- 英語：Program Intently and Expressively
- 日本語：意図を表現してプログラミングせよ

## 【どういうこと】コードの意図を伝える

コードを書くときに大切なことは、詩やエッセイ、不特定多数の人に見せるブログ、あるいは要件を伝えるメールを書くのと同じように意図を明確に表現するように書くことです。

それはコードがコンパイラではなく人が読むためのものだからです。したがってコードの表現を工夫して「このソフトウエアはどう動くものなのか」ということをコードの読み手にストレートに伝わるようにコードを書きましょう。

## 【どうして】コードが唯一の手がかり

コードだけがソフトウエアの動作を「正確に」「完全に」知るための手がかりです。

ソフトウエア開発では様々なドキュメントが作成されますがそれらでは「ソフトウエアがどう動くのか」について正確に知ることはできません。要件定義書「どんな物が欲しいか」、基本設計書は「どのようなソフトウエアで要件を実現するか」、詳細設計書は「どのような構造でソフトウエアを作るか」の予定が書いてあるだけです。コードの変更を反映していないことも多く、ソフトウェアの動作を正確に把握するためにはコードを読むしかありません。

よってわかりやすいコードを書いてコードで意図を伝えるしかないのです。

## 【どうすれば】コードは読みやすさが最優先

コードを書くときは「書きやすさ」より「読みやすさ」を重視しましょう。コードは書かれることより読まれることのほうがずっと多いです。書くのは1回ですが、その後沢山の人がたくさんの回数読むことになります。結果書く時間より読む時間の方が遥かに多いのです。
以上のことから各効率より読む効率が優先されます。読みやすければ書くときの効率が多少落ちてもそれに見合う価値があります。

コードはソフトウエアが有用性を持つ限り使い続けられるので、思いがけず長く行き続けることがあります。コードが読んでわかりやすいものになっていればそのことの価値は累積的に膨れ上がります。
ちなみに関連で言うとコードは「実行の効率」よりも「読む効率」が優先されます。読みやすければあとから実行効率を上げるのも簡単だからです。

読む効率が最優先なので小賢しい難しい書き方をして自分の頭脳アピールをしないようにします。技術を覚えたてのときやってしまいがちですが人が読めないコードは「利口なコード」ではありません。読む人に意図がきちんと伝わるコードが目的を果たしている「利口なコード」なのです。
コードを読んでるときに何を言っているか理解できない場合は直ちにわかりやすく書き直すようにしましょう。

## 【発展】もぐらたたき開発を避ける

「もぐらたたき」とは、ゲームセンターなどにある遊びで、ランダムに出てくるモグラをハンマーで叩いて退治するゲームです。しかし、叩いても叩いても次々にモグラが現れるため、終わりがありません。
ソフトウェア開発においても、コード品質を犠牲にしてスピードを優先すると、不具合が次々と発生し、その修正に追われることになります。これはまさに「もぐらたたき」をしているような状態です。

ソフトウエアのプロジェクトマネージャは早く納品するための様々なプレッシャーに直面しています。とりわけ時間は重要で、機能完成までの時間を重視してコードの品質を犠牲にしてしまう傾向があります。しかしそれはもぐらたたき開発をしているのと同じです。品質の悪いコードは不具合を含んでいたり、修正がしにくかったりで、後々の工程で悪影響を及ぼします。品質の高いコードを書くことは短期的には損失に見えますが「もぐらたたき」にならないため長期的には必ず利益をもたらします。

## 【発展】コメントは書く

コメントを書かなくても読めるようなわかりやすいコードを書くのが理想です。ただしコードはどこまで行っても「What」と「How」つまり「何をしているか」「どのようにやっているか」までしか表現できません。「Why」つまり「なぜそれをしているか」を表現するにはコメントを利用する必要があります。

コードという文書は読む人とのコミュニケーションに使用するものです。コミュニケーションを円滑にするのに役立つならWhyにとどまらず進んでコメントを手段として使用すべきです。コメントで説明しなくても良いわかりやすいコードを目指しつつ、それでも表現できない部分についてはコメントを書くというバランスを持ったコードを書くようにしましょう。
